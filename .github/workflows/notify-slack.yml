on:
  workflow_run:
    workflows: ["Build main or features", "Deploy tagged version"]
    types: [completed]

jobs:
#  on-success:
#    runs-on: ubuntu-latest
#    if: ${{ github.event.workflow_run.conclusion == 'success' }}
#    steps:
#      - name: Slack Notify
#        uses: rtCamp/action-slack-notify@v2.2.0

  on-completion:
#  on-failure:
    runs-on: ubuntu-latest
#    if: ${{ github.event.workflow_run.conclusion == 'failure' }}
    steps:
      - name: Slack Notify
        uses: rtCamp/action-slack-notify@v2.2.0
        env:
          SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}
          SLACK_USERNAME: Bodleian
          SLACK_ICON_EMOJI: ":book:"
          SLACK_COLOR: "${{ job.status }}"
          SLACK_TITLE: "A workflow completed"
#          SLACK_MESSAGE: ""
          SLACK_FOOTER: "Best regards from Bodleian"
          MSG_MINIMAL: actions url
